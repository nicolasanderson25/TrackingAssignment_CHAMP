<!DOCTYPE html><!--  Last Published: Wed Feb 21 2024 02:09:00 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="65cabc05946e597dfe7453c9" data-wf-site="65cabc05946e597dfe7453ca">
<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NNM4LDBZ');</script>
<!-- End Google Tag Manager -->
  <meta charset="utf-8">
  <title>Search Results</title>
  <meta content="Search Results" property="og:title">
  <meta content="Search Results" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/components.css" rel="stylesheet" type="text/css">
  <link href="css/vms-kt-dmg.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Lora:regular,500,600,700","Inter:300,regular,500,600,700,800,900","Work Sans:300,regular,500,600,700,800,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.webp" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.webp" rel="apple-touch-icon">
  <script>
    //Change LP1 value
    const lp1 = "BugMD-Facebook-LP(KT-DMG)-02-15-24";
    const url_string = window.location.href;
    let url = new URL(url_string);
    const lpv = url.searchParams.get("lpv");
    const utm_length = Array.from(url.searchParams).length;
    let new_url = "";
    if(utm_length > 0){
      if(lpv == null ){
        new_url = url_string + `&lpv=${lp1}`;
      }
    }else{
      new_url = url_string + `?lpv=${lp1}`;
    }
    window.history.replaceState('', '', new_url);
  </script>
  <script type="text/javascript" src="https://trk.bugmd.com/pretrack.js?rtkcmpid=65d559021b14e2000101b4c7"></script>
  <!--  Google Tag Manager  -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MRJVL9L');</script>
  <!--  End Google Tag Manager  -->
  <script async="" defer="" src="https://tools.luckyorange.com/core/lo.js?site-id=04afda85"></script>
</head>
<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NNM4LDBZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  <div class="w-container">
    <h1>Search results</h1>
    <form action="/search" class="w-form"><label for="search">Search</label><input class="w-input" maxlength="256" name="query" placeholder="Searchâ€¦" type="search" id="search" required=""><input type="submit" class="w-button" value="Search"></form>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=65cabc05946e597dfe7453ca" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/vms-kt-dmg.js" type="text/javascript"></script>
<script>
(function () {
  // ====== CONFIG ======
  const EVENT_LABEL = "Purchase";
  const STORAGE_KEY = "champ_purchase_seen_map_v1"; // stores counts by id
  const MAX_KEEP = 200; // cap size to avoid unlimited growth

  // ====== Helpers ======
  function nowIso() { return new Date().toISOString(); }

  function getId(payload) {
    // Use the best identifier you have
    return (
      payload?.champEventId ||
      payload?.champEventID ||
      payload?.champOrderId ||
      ""
    );
  }

  function readMap() {
    try {
      return JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "{}");
    } catch {
      return {};
    }
  }

  function writeMap(map) {
    // cap stored entries (simple FIFO by lastSeen)
    const entries = Object.entries(map);
    if (entries.length > MAX_KEEP) {
      entries.sort((a, b) => (a[1].lastSeen || "").localeCompare(b[1].lastSeen || ""));
      const trimmed = Object.fromEntries(entries.slice(entries.length - MAX_KEEP));
      sessionStorage.setItem(STORAGE_KEY, JSON.stringify(trimmed));
      return;
    }
    sessionStorage.setItem(STORAGE_KEY, JSON.stringify(map));
  }

  function handlePurchase(payload) {
    const id = getId(payload) || ("NO_ID_" + Date.now());
    const map = readMap();

    const prev = map[id];
    const isDup = !!prev;

    map[id] = {
      count: (prev?.count || 0) + 1,
      firstSeen: prev?.firstSeen || nowIso(),
      lastSeen: nowIso(),
      lastPath: window.location.pathname,
      lastTotal: payload?.champTotal ?? null
    };
    writeMap(map);

    // Loud + clear output
    const msg = isDup
      ? `ðŸš¨ DUPLICATE champEvent Purchase (${map[id].count}x) id=${id} on ${window.location.pathname}`
      : `âœ… FIRST champEvent Purchase id=${id} on ${window.location.pathname}`;

    console.log(msg, payload);

if (typeof window.fbq === "function") {
  const id = getId(payload) || "";
  fbq("trackCustom", "ChampPurchaseSignal", {
    champEventId: id,
    champOrderId: payload?.champOrderId || "",
    champTotal: Number(payload?.champTotal || 0) || 0,
    path: window.location.pathname,
    ts: Date.now()
  });
}


    // Optional: show a UI warning on duplicates (comment out if annoying)
    if (isDup) {
      console.warn("Duplicate details:", map[id]);
    }
  }

  // ====== Listen to future pushes ======
  window.dataLayer = window.dataLayer || [];
  const originalPush = window.dataLayer.push.bind(window.dataLayer);

  window.dataLayer.push = function () {
    for (const arg of arguments) {
      if (arg && arg.event === "champEvent" && arg.champEventLabel === EVENT_LABEL) {
        handlePurchase(arg); // <-- EVERY TIME it appears
      }
    }
    return originalPush.apply(null, arguments);
  };

  // ====== Also scan existing dataLayer (if Purchase happened before this loaded) ======
  try {
    for (const item of window.dataLayer) {
      if (item && item.event === "champEvent" && item.champEventLabel === EVENT_LABEL) {
        handlePurchase(item);
      }
    }
  } catch {}

  console.log("[Detector] champEvent Purchase duplication detector installed");
})();
</script>

</body>
</html>